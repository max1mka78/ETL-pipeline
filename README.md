# ETL-пайплайн и автоматизация отчётов в Airflow

## Контекст проекта
Проект реализован для автоматизации сбора, обработки и доставки аналитических данных в продукте с новостной лентой и мессенджером. Перед аналитикой стояла задача — наладить ежедневную генерацию отчётов без ручного вмешательства. Данные хранятся в ClickHouse и обновляются в реальном времени.

## Цель проекта
Построить ETL-пайплайн в Apache Airflow для автоматического расчёта ключевых метрик (DAU, CTR, просмотры, сообщения) и отправки сводки по Telegram каждый день утром.

## Стек
Airflow, Python, ClickHouse, SQL, pandas, requests, Telegram Bot API

## Этапы работы
1. **Проектирование DAG** — определение задач и их зависимостей: извлечение данных, агрегация, формирование отчёта, отправка.
2. **Реализация ETL-процесса**:
   - Извлечение данных из `feed_actions` и `message_actions`.
   - Агрегация по пользователям и срезам (пол, возраст, ОС).
   - Подсчёт метрик: DAU, CTR, просмотры, лайки, количество сообщений.
3. **Формирование отчёта** — создание текстового отчёта с ключевыми значениями за предыдущий день и графиков динамики за 7 дней.
4. **Автоматизация отправки** — интеграция с Telegram Bot API для отправки утреннего уведомления.
5. **Настройка расписания** — запуск DAG ежедневно в 8:00 через Airflow Scheduler.

## Результат
Работающий ETL-пайплайн, который:
- Автоматически обновляет аналитические данные каждый день.
- Формирует и отправляет отчёт в Telegram без участия аналитика.
- Позволяет команде оперативно реагировать на изменения в метриках.
